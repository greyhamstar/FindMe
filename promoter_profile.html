<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>FindMe â€” Promoter Profile</title>
<link rel="icon" href="assets/logo.png">
<link rel="apple-touch-icon" href="assets/icon-192.png">
<link rel="manifest" href="site.webmanifest">
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@500;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head><body>
<header class="hdr">
  <div class="brand">
    <img class="brand-logo" src="assets/logo.png" alt="FindMe logo">
    <div class="brand-text">
      <span class="brand-name">FindMe</span>
      <span class="brand-tag">Campaign Staffing</span>
    </div>
  </div>
  <div class="hdr-right">
    <nav class="nav">
  <a class="chip" href="dashboard.html">Dashboard</a>
  <button id="logoutBtn" class="btn-ghost">Logout</button>
</nav>
    <button class="btn-ghost icon" id="navToggle" aria-label="Menu">â˜°</button>
    <button id="themeToggle" class="btn-ghost" title="Toggle theme">â˜€ï¸Ž / ðŸŒ™</button>
  </div>
</header>
<main class="container">
  <div class="card">
    <h2 style="margin-top:0">Update Profile</h2>
    <div class="grid grid-2">
      <div>
        <div class="grid grid-2">
          <div><label>First Name</label><input id="firstName"/></div>
          <div><label>Surname</label><input id="surname"/></div>
          <div><label>South African ID</label><input id="idNumber"/></div>
          <div><label>Email</label><input id="email"/></div>
          <div><label>CV File Name</label><input id="cvName"/></div>
          <div><label>Region (Province)</label><select id="region"><option>Eastern Cape</option><option>Free State</option><option>Gauteng</option><option>KwaZulu-Natal</option><option>Limpopo</option><option>Mpumalanga</option><option>North West</option><option>Northern Cape</option><option>Western Cape</option></select></div>
          <div><label>Ethnicity</label><select id="ethnicity"><option>Black</option><option>White</option><option>Indian</option><option>Coloured</option></select></div>
          <div><label>Gender</label><select id="gender"><option>Male</option><option>Female</option></select></div>
        </div>
      </div>
      <div class="card">
        <h3 style="margin-top:0">Formal Picture</h3>
        <div class="grid" style="grid-template-columns:160px 1fr">
          <img id="photoPreview" class="avatar" src="assets/avatar-placeholder.svg" alt="Formal picture preview"/>
          <div>
            <p class="small">Upload a formal portrait (JPG/PNG/WebP). We resize on-device and store locally for this demo.</p>
            <input id="photoInput" type="file" accept="image/*"/>
            <div class="grid grid-2" style="margin-top:10px">
              <button id="savePhotoBtn" class="btn">Save photo</button>
              <button id="removePhotoBtn" class="btn-ghost">Remove photo</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="grid grid-2" style="margin-top:14px">
      <button id="saveBtn" class="btn">Save changes</button>
      <a class="btn-ghost" href="dashboard.html">Back to Dashboard</a>
    </div>
    <div id="msg"></div>
  </div>
</main>
<footer class='ftr'>Â© 2025 FindMe â€¢ All rights reserved</footer>
<script src="js/app.js"></script>
<script>
const me=getSession(); protect(me);
document.getElementById('logoutBtn').addEventListener('click', logout);
firstName.value=me.firstName||''; surname.value=me.surname||''; idNumber.value=me.idNumber||''; email.value=me.email||''; cvName.value=me.cvName||''; region.value=me.region||'Gauteng'; ethnicity.value=me.ethnicity||'Black'; gender.value=me.gender||'Male';
if(me.photoFormal){ document.getElementById('photoPreview').src=me.photoFormal; }
document.getElementById('saveBtn').addEventListener('click',()=>{
  const updated={...me, firstName:firstName.value.trim(), surname:surname.value.trim(), idNumber:idNumber.value.trim(), email:email.value.trim(), cvName:cvName.value.trim(), region:region.value, ethnicity:ethnicity.value, gender:gender.value};
  updateUser(updated); setSession(updated); showMsg('Profile saved.','success');
});
photoInput.addEventListener('change', async (e)=>{
  const file=e.target.files?.[0]; if(!file) return;
  const data=await resizeImageFile(file, 900, 0.9);
  photoPreview.src=data; photoPreview.dataset.pending=data;
});
document.getElementById('savePhotoBtn').addEventListener('click',()=>{
  const pending=photoPreview.dataset.pending||photoPreview.src;
  if(!pending) return;
  const updated={...getSession(), photoFormal: pending};
  updateUser(updated); setSession(updated); showMsg('Formal picture saved.','success');
  delete photoPreview.dataset.pending;
});
document.getElementById('removePhotoBtn').addEventListener('click',()=>{
  const updated={...getSession()}; delete updated.photoFormal;
  updateUser(updated); setSession(updated);
  photoPreview.src='assets/avatar-placeholder.svg';
  showMsg('Formal picture removed.','success');
});
</script>
</body></html>
