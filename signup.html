<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>FindMe — Sign up (Offline)</title>
<link rel="icon" href="assets/logo.png">
<link rel="apple-touch-icon" href="assets/icon-192.png">
<link rel="manifest" href="site.webmanifest">
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@500;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head><body>
<header class="hdr">
  <div class="brand">
    <img class="brand-logo" src="assets/logo.png" alt="FindMe logo">
    <div class="brand-text">
      <span class="brand-name">FindMe</span>
      <span class="brand-tag">Campaign Staffing</span>
    </div>
  </div>
  <div class="hdr-right">
    <nav class="nav">
  <a class="chip" href="login.html">Log in</a>
</nav>
    <button class="btn-ghost icon" id="navToggle" aria-label="Menu">☰</button>
  </div>
</header>
<main class="container">
  <div class="card">
    <h2 style="margin-top:0">Create an account</h2>
    <p class="small">This offline build uses LocalStorage to simulate a backend.</p>
    <div id="msg"></div>
    <div class="grid grid-2">
      <div><label>Role</label><select id="role"><option value="promoter">Promoter</option><option value="company">Company</option></select></div>
      <div><label>Region (Province)</label><select id="region"><option>Eastern Cape</option><option>Free State</option><option>Gauteng</option><option>KwaZulu-Natal</option><option>Limpopo</option><option>Mpumalanga</option><option>North West</option><option>Northern Cape</option><option>Western Cape</option></select></div>
    </div>
    <div id="promoterFields" class="grid grid-2" style="margin-top:6px">
      <div><label>First Name</label><input id="firstName" placeholder="John"/></div>
      <div><label>Surname</label><input id="surname" placeholder="Doe"/></div>
      <div><label>South African ID</label><input id="idNumber" placeholder="0000000000000"/></div>
      <div><label>Email</label><input id="email" placeholder="john@example.com"/></div>
      <div><label>CV File Name</label><input id="cvName" placeholder="john_cv.pdf"/></div>
      <div><label>Password</label><input id="password" type="password" placeholder="••••••••"/></div>
      <div><label>Ethnicity</label><select id="ethnicity"><option value="">Select...</option><option>Black</option><option>White</option><option>Indian</option><option>Coloured</option></select></div>
      <div><label>Gender</label><select id="gender"><option value="">Select...</option><option>Male</option><option>Female</option></select></div>
    </div>
    <div id="companyFields" class="grid grid-2 hidden" style="margin-top:6px">
      <div><label>Company Name</label><input id="companyName" placeholder="Acme Ltd"/></div>
      <div><label>Company Email</label><input id="companyEmail" placeholder="hr@acme.com"/></div>
      <div style="grid-column:1/-1"><label>Password</label><input id="companyPassword" type="password" placeholder="••••••••"/></div>
    </div>
    <div class="grid grid-2" style="margin-top:12px">
      <button id="createBtn" class="btn">Create account</button>
      <a class="btn-ghost" href="login.html">I already have an account</a>
    </div>
  </div>
</main>
<footer class='ftr'>© 2025 FindMe • All rights reserved</footer>
<script type="module">
import { signUpPromoter, signUpCompany, showMsg } from './js/offline.js';
const roleSel=document.getElementById('role'); const promoterFields=document.getElementById('promoterFields'); const companyFields=document.getElementById('companyFields');
roleSel.addEventListener('change',()=>{ const isPromoter=roleSel.value==='promoter'; promoterFields.classList.toggle('hidden',!isPromoter); companyFields.classList.toggle('hidden',isPromoter); });
document.getElementById('createBtn').addEventListener('click', async ()=>{
  const region=document.getElementById('region').value; const role=roleSel.value;
  try{
    if(role==='promoter'){
      const payload={ email: email.value.trim(), password: password.value, region, firstName:firstName.value.trim(), surname:surname.value.trim(), idNumber:idNumber.value.trim(), cvName:cvName.value.trim(), ethnicity:ethnicity.value, gender:gender.value };
      if(!payload.email||!payload.password||!payload.firstName||!payload.surname||!payload.idNumber||!payload.ethnicity||!payload.gender) return showMsg('Please fill all promoter fields.','error');
      await signUpPromoter(payload);
    }else{
      const payload={ email: companyEmail.value.trim(), password: companyPassword.value, region, companyName: companyName.value.trim() };
      if(!payload.email||!payload.password||!payload.companyName) return showMsg('Please fill all company fields.','error');
      await signUpCompany(payload);
    }
    window.location.href='dashboard.html';
  }catch(err){ console.error(err); showMsg(err.message||'Sign up failed','error'); }
});
</script>
<script>document.addEventListener('click',e=>{if(e.target?.id==='navToggle'){document.querySelector('.nav')?.classList.toggle('open')}if(e.target?.closest('.nav')&&e.target.tagName==='A'){document.querySelector('.nav')?.classList.remove('open')}});</script>
<script type="module">
import { onAuth, getUserDoc } from './js/offline.js';
onAuth(async (u)=>{
  const link=document.getElementById('navSuper'); if(!link) return;
  const you = u ? await getUserDoc(u.id||u) : null;
  link.style.display = (you && you.role==='super') ? 'inline-flex' : 'none';
});
</script>
</body></html>