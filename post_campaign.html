<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>FindMe! — Post Campaign</title><link rel="stylesheet" href="assets/style.css"/></head>
<body><div class="container">
  <div id="nav" class="nav"><div class="brand">FindMe<span style="color:#22c55e">!</span></div></div>
  <div class="card">
    <h1>Post a Campaign</h1>
    <div class="row">
      <div class="col"><label>Title</label><input id="title" placeholder="e.g. Store Launch — Sandton"/></div>
      <div class="col"><label>Region (Province)</label><select id="region"></select></div>
    </div>
    <div class="row">
      <div class="col"><label>Date</label><input id="date" type="date"/></div>
      <div class="col"><label>Budget (ZAR)</label><input id="budget" type="number" min="0" step="100" placeholder="5000"/></div>
    </div>
    <label>Details</label><textarea id="details" rows="4" placeholder="Describe the campaign, timing, requirements…"></textarea>
    <div class="row" style="margin-top:12px; gap:8px">
      <button class="btn" id="createBtn">Create Campaign</button>
      <a class="btn secondary" href="company_dashboard.html">Cancel</a>
    </div>
  </div>
  <footer class="small">FindMe! • Firebase Auth + Firestore + Storage</footer>
</div>
<script type="module">
  import { REGIONS_SA, showToast } from './js/utils.js';
  import { auth } from './js/firebase.js';
  import { Campaigns } from './js/campaigns.js';
  const regionSel = document.querySelector('#region'); REGIONS_SA.forEach(r=>{ const o=document.createElement('option'); o.value=r; o.textContent=r; regionSel.appendChild(o); });
  createBtn.addEventListener('click', async ()=>{
    const title = title.value.trim(); const region = regionSel.value; const date = document.querySelector('#date').value;
    const budget = document.querySelector('#budget').value; const details = details.value.trim();
    if (!title || !region || !date) { showToast('Please fill title, region, date'); return; }
    await Campaigns.create({ companyId: auth.currentUser.uid, title, region, date, budget, details });
    showToast('Campaign created'); setTimeout(()=> location.href='company_dashboard.html', 400);
  });
</script></body></html>
