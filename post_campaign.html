<!doctype html><html lang='en'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>FindMe — Post Campaign</title><link rel='stylesheet' href='css/style.css'></head><body>
<header class="hdr">
  <div class="brand">
    <img class="brand-logo" src="assets/logo.png" alt="FindMe logo">
    <div class="brand-text">
      <span class="brand-name">FindMe</span>
      <span class="brand-tag">Campaign Staffing</span>
    </div>
  </div>
  <div class="hdr-right">
    <nav class="nav">
      <a class="chip" href="index.html">Home</a>
      <a class="chip" href="dashboard.html">Dashboard</a>
      <a class="chip" href="update_profile.html">Profile</a>
      <a class="chip" id="navPromoters" href="promoters.html">Promoters</a>
      <a class="chip" id="navStores" href="stores.html">Stores</a>
      <a class="chip" id="navPost" href="post_campaign.html">Post Campaign</a>
      <a class="chip" id="navActive" href="active_campaigns.html">Active Campaigns</a>
      <a class="chip" id="navSuper" href="super.html">Super</a>
      <a class="chip" href="signup.html">Create account</a>
      <button id="logoutBtn" class="btn-ghost">Logout</button>
    </nav>
    <button class="btn-ghost icon" id="navToggle" aria-label="Menu">☰</button>
  </div>
</header>
<script type="module">
import { onAuth, getUserDoc, signOut } from './js/offline.js';
document.getElementById('navToggle').addEventListener('click', ()=>document.querySelector('.nav').classList.toggle('open'));
const lg = document.getElementById('logoutBtn'); if(lg) lg.addEventListener('click', ()=>signOut().then(()=>location.href='login.html'));
onAuth(async (u)=>{ 
  const me = u ? await getUserDoc(u.id||u) : null;
  const isCompany = me && me.role==='company'; const isPromoter = me && me.role==='promoter'; const isSuper = me && me.role==='super';
  const show = (id, ok)=>{ const el=document.getElementById(id); if(el) el.style.display = ok?'inline-flex':'none'; };
  show('navPromoters', isCompany); show('navStores', isCompany); show('navPost', isCompany);
  show('navActive', (isCompany||isPromoter)); show('navSuper', isSuper);
});
</script>

<main class="container">
  <div class="card">
    <h2 style="margin:0">Post a campaign</h2>
    <div class="grid grid-3" style="margin-top:10px">
      <div><label>Title</label><input id="title" placeholder="Brand sampling @ Sandton"></div>
      <div><label>Region</label><select id="region"><option>Eastern Cape</option><option>Free State</option><option>Gauteng</option><option>KwaZulu-Natal</option><option>Limpopo</option><option>Mpumalanga</option><option>North West</option><option>Northern Cape</option><option>Western Cape</option></select></div>
      <div><label>Budget (R)</label><input id="budget" type="number" min="0" step="1" placeholder="5000"></div>
      <div><label>Start date</label><input id="startDate" type="date"></div>
      <div><label>End date</label><input id="endDate" type="date"></div>
      <div style="grid-column:1/-1"><label>Description</label><textarea id="desc" placeholder="Campaign details, deliverables, dress code..."></textarea></div>
      <div class="grid" style="grid-template-columns:1fr auto;align-items:end"><div id="msg" class="small"></div><button id="postBtn" class="btn">Post</button></div>
    </div>
  </div>
</main>
<script type="module">
import { onAuth, getUserDoc, postCampaign } from './js/offline.js';
let ME=null; onAuth(async (u)=>{ if(!u){ location.href='login.html'; return; } ME=await getUserDoc(u.id||u); if(ME.role!=='company') location.href='dashboard.html'; });
postBtn.addEventListener('click', async ()=>{ const payload={ ownerId: ME.id, title:title.value.trim(), region:region.value, budget:budget.value, startDate:startDate.value, endDate:endDate.value, description:desc.value.trim() }; if(!payload.title){ msg.textContent='Title is required'; return; } await postCampaign(payload); msg.textContent='Posted ✓'; title.value=budget.value=startDate.value=endDate.value=desc.value=''; });
</script>
<div id="toast" class="toast"></div>

<script>
function toast(msg, ok=true){
  const el = document.getElementById('toast'); if(!el) return;
  el.textContent = msg;
  el.style.background = ok ? '#111' : '#b00';
  el.classList.add('show');
  setTimeout(()=>{ el.classList.remove('show'); }, 1800);
}
</script>
</body></html>

