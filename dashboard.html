<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'/><meta name='viewport' content='width=device-width, initial-scale=1.0'/><title>FindMe — Dashboard</title><link rel='stylesheet' href='css/style.css'/></head><body><header class='header'><div class='logo'>FindMe!</div><nav class='flex'><span id='whoami' class='badge'></span><a class='badge' href='index.html'>Home</a><button id='logoutBtn' class='badge secondary'>Logout</button></nav></header><main class='container'><div class='card' id='promoterCard'><h2>Promoter Dashboard</h2><div class='flex'><a class='badge' href='promoter_profile.html'>Update Profile</a></div><h3>Campaigns in your region</h3><table class='table' id='campaignTable'><thead><tr><th>Title</th><th>Region</th><th>Budget</th><th>Apply</th></tr></thead><tbody></tbody></table></div><div class='card' id='companyCard'><h2>Company Dashboard</h2><div class='flex'><a class='badge' href='post_campaign.html'>Post a Campaign</a><a class='badge' href='promoters.html'>Browse Promoters</a></div><h3>Your Campaigns</h3><table class='table' id='myCampaigns'><thead><tr><th>Title</th><th>Region</th><th>Budget</th><th>Applications</th></tr></thead><tbody></tbody></table></div></main><script src='js/app.js'></script><script>const me=getSession();protect(me);document.getElementById('whoami').textContent=me.role==='promoter'?`${me.firstName||''} ${me.surname||''} — ${me.region}`.trim():`${me.companyName} — ${me.region}`;document.getElementById('logoutBtn').addEventListener('click',logout);const promoterCard=document.getElementById('promoterCard');const companyCard=document.getElementById('companyCard');promoterCard.style.display=me.role==='promoter'?'block':'none';companyCard.style.display=me.role==='company'?'block':'none';if(me.role==='promoter'){const tbody=document.querySelector('#campaignTable tbody');tbody.innerHTML='';listCampaigns().filter(c=>c.region===me.region).forEach(c=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${c.title}</td><td>${c.region}</td><td>R ${c.budget}</td><td><button data-id='${c.id}'>Apply</button></td>`;tbody.appendChild(tr);});tbody.addEventListener('click',e=>{if(e.target.tagName==='BUTTON'){const id=e.target.getAttribute('data-id');applyToCampaign(id,me.id);alert('Application submitted!');refreshCompanyTable();}});}function refreshCompanyTable(){if(me.role!=='company')return;const tbody2=document.querySelector('#myCampaigns tbody');tbody2.innerHTML='';listCampaigns().filter(c=>c.ownerId===me.id).forEach(c=>{const apps=listApplications().filter(a=>a.campaignId===c.id);const count=apps.length;const view=count?`<details><summary>${count} application(s)</summary>${apps.map(a=>{const p=getUser(a.promoterId);return `<div class='card'><div><strong>${p.firstName} ${p.surname}</strong> (${p.region})</div><div>Email: ${p.email}</div><div>SA ID: ${p.idNumber||'-'}</div><div>CV: ${p.cvName||'-'}</div></div>`;}).join('')}</details>`:'0';const tr2=document.createElement('tr');tr2.innerHTML=`<td>${c.title}</td><td>${c.region}</td><td>R ${c.budget}</td><td>${view}</td>`;tbody2.appendChild(tr2);});}refreshCompanyTable();</script></body></html>