<!doctype html><html lang='en'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>FindMe — Log in</title><link rel='stylesheet' href='css/style.css'></head><body>
<header class="hdr">
  <div class="brand">
    <img class="brand-logo" src="assets/logo.png" alt="FindMe logo">
    <div class="brand-text">
      <span class="brand-name">FindMe</span>
      <span class="brand-tag">Campaign Staffing</span>
    </div>
  </div>
  <div class="hdr-right">
    <nav id="mainNav" class="nav"><button id="navToggle" class="nav-toggle" aria-label="Menu" aria-expanded="false" aria-controls="mainNav">☰</button><div class="nav-items">
      <a class="chip" href="signup.html">Create account</a>
      <button id="logoutBtn" class="btn-ghost">Logout</button>
    </div></nav>

<script>
// Role-based nav hide (fast, before modules)
(function(){
  try{
    var s = JSON.parse(localStorage.getItem('fm_session')||'{}');
    var users = JSON.parse(localStorage.getItem('fm_users')||'[]');
    var me = users.find(function(u){ return u.id===s.uid; }) || null;
    if(me && me.role==='promoter'){
      ['navPromoters','navStores','navPost','navSuper'].forEach(function(id){
        var el=document.getElementById(id); if(el) el.style.display='none';
      });
    }
  }catch(e){}
})();
</script>

    <button class="btn-ghost icon" id="navToggle" aria-label="Menu">☰</button>
  </div>
</header>
<main class="container auth-wrap">
  <div class="card">
    <h2>Log in</h2>
    <div id="err" class="error" style="display:none"></div>
    <div class="grid">
      <div><label>Email</label><input id="email" placeholder="you@example.com"></div>
      <div><label>Password</label><input id="password" type="password" placeholder="••••••••"></div>
      <div class="grid" style="grid-template-columns:1fr auto;align-items:end"><div></div><button id="loginBtn" class="btn">Log in</button></div>
      <div class="small">No account? <a href="signup.html">Sign up</a></div>
    </div>
  </div>
</main>
<script type="module">
import { signIn } from './js/offline.js';
document.getElementById('navToggle').addEventListener('click', ()=>document.querySelector('.nav').classList.toggle('open'));
document.getElementById('loginBtn').addEventListener('click', async ()=>{ 
  try{ await signIn(email.value.trim(), password.value.trim()); location.href='dashboard.html'; }
  catch(err){ const el=document.getElementById('err'); el.style.display='block'; el.textContent = err.message||'Login failed'; }
});
</script>
<div id="toast" class="toast"></div>

<script>
function toast(msg, ok=true){ const el=document.getElementById('toast'); if(!el) return; el.textContent=msg; el.style.background=ok?'#111':'#b00'; el.classList.add('show'); setTimeout(()=>{ el.classList.remove('show'); }, 1800); }
</script>

<script>
// mobile nav toggle binder
(function(){ var btn=document.getElementById('navToggle'); var nav=document.getElementById('mainNav')||document.querySelector('.nav'); if(btn && nav && !btn.dataset.bnd){ btn.dataset.bnd='1'; btn.addEventListener('click', function(){ var isOpen=nav.classList.toggle('open'); btn.setAttribute('aria-expanded', isOpen?'true':'false'); }); } })();
</script>

<script>
// mobile nav toggle binder v2
(function(){
  var btn = document.getElementById('navToggle');
  var nav = document.getElementById('mainNav');
  if(btn && nav && !btn.dataset.bnd){
    btn.dataset.bnd = '1';
    btn.addEventListener('click', function(){
      var isOpen = nav.classList.toggle('open');
      btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
    });
  }
})();
</script>






<script>
// burger binder: classic clean
(function(){
  var nav = document.getElementById('mainNav');
  var btn = document.getElementById('navToggle');
  if(!nav || !btn) return;
  // remove FAB if present from previous build
  var fab = document.getElementById('navFab'); if(fab && fab.parentNode){ fab.parentNode.removeChild(fab); }
  function toggle(){ var open = nav.classList.toggle('open'); btn.setAttribute('aria-expanded', open ? 'true' : 'false'); }
  function close(){ nav.classList.remove('open'); btn.setAttribute('aria-expanded','false'); }
  if(!btn.dataset.bnd){ btn.dataset.bnd='1'; btn.addEventListener('click', toggle); }
  var items = nav.querySelector('.nav-items');
  if(items && !items.dataset.bnd){ items.dataset.bnd='1'; items.addEventListener('click', function(e){ if(e.target.tagName==='A' || (e.target.closest && e.target.closest('a'))){ close(); } }); }
  // start closed on small screens
  try{ if (window.matchMedia && window.matchMedia('(max-width: 800px)').matches){ close(); } }catch(e){}
})();
</script>

</body></html>




